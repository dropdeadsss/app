# App
Проект по созданию приложения для голосовой связи, текстового общения, записи голосовых сообщений и их расшифровки (преобразования звука в текст).

## Backend 
Бэкэнд приложения состоит из набора сервисов (папка [AppServices](https://github.com/dropdeadsss/app/tree/master/AppServices)), которые отвечают за определенный функционал и сервера баз данных.

### 1. Сервис авторизации (AuthService)
Сервис написан на C# с использованием asp .net core.
- Регистрация
- Авторизация (с генерацией Jwt токенов)
### 2. Сервис для функционала пользователя (UserService)
Сервис написан на C# с использованием asp .net core.
- Получение информации о пользователе
- Функционал для изменения информации о пользователе (не реализовано на frontend)
### 3. Сервис для чата (ChatService)
Сервис написан на C# с использованием asp .net core.
- Получение сообщений чата
- Отправка текстовых сообщений
- Запись и отправка голосовых сообщений
- Функционал для работы с чатом (не реализовано на frontend)
### 4. Сервис для управления пользовательскими серверами (UserServersService)
Сервис написан на C# с использованием asp .net core.
- Создание сервера (не реализовано на frontend)
- Получение информации о сервере
- Администрирование сервера (не реализовано до конца (система ролей и тд))  
### 5. Сервис для обмена данными в реальном времени (HubServices)
Сервис написан на C# с использованием asp .net core. Для реализации обмена данными в реальном времени используется SignalR.
- Подключение к хабам (Hub)
- Подключение к группе
- Отправка и получение сообщений от других пользователей в группе
### 6. Веб-сокет сервер для оганизации голосовой связи (WebSocketServer)
Сервис написан на javascript с использованием node.js.
- Подключение к серверу и получение идентификатора
- Отправка запроса на создание соединения между пользователями через RTCPeerConnection.
### 7. Сервис для расшифровки голосовых с помощью ИИ (WhisperAIService)
Сервис написан на python. Для создания web-сервера используется uvicorn, для расшифровки голосовых openai-whisper
- Получение и обработка аудиофайлов
### 8. Сервер баз данных (MongoDB)
Общий сервер для баз данных все сервисов. Использует NoSQL бд MongoDB.
Для сервера бд лежит бэкап с тестовыми данными, которые подгрузятся при первом запуске контейнера (примерно 30 сек).
Далее данные хранятся в томе (volume) appservices_db_data.

## Frontend 
Фронтэнд приложения создан с помощью проекта electronjs, предоставсляющий функционал для создания десктопных приложений с помощью веб-технологий (html, js, css). Клиент находится в папке [electron-app](https://github.com/dropdeadsss/app/tree/master/electron-app).

### Запуск сервисов
Для развертывания сервисов используется Docker. Для каждого сервиса создан dockerfile, в котором описываются команды для создания изображений (image). В корне папки [AppServices](https://github.com/dropdeadsss/app/tree/master/AppServices) также создан docker-compose.yaml для создания изображений и запуска всех контейнеров сразу через docker compose up.

#### **Предупреждение**
Изображение для сервиса WhisperAIService будет создаваться долго (может занять до 15 минут) т.к. там загружаются все модели нейросети. При этом само изображение будет весить много (около 14 Гб).
После запуска контейнера будет загружаться выбранная в коде модель, поэтому нужно подождать перед использованием.

### Запуск клиента
Для работы клиента приложения в режиме разработки необходимо скачать [Node.js](https://nodejs.org/en/download) и менеджер пакетов npm. После нужно установить пакеты через ***npm install***. Для запуска самого проекта нужно выполнить команду ***npm run start***. 
(На всякий случай пакеты для работы приложения: ***npm install electron --save-dev***, ***npm install electron-store***, ***npm install @microsoft/signalr***, ***npm install ws***)
